#!/bin/sh

# vagrant-checkstatus.sh generated by https://github.com/timveil/hdp-vagrant-generator on $generatedDate

#parse( "macros.vm" )

#log("Waiting for Cluster Install to Finish")
PROGRESS=0
until [ $PROGRESS -eq 100 ]; do
    PROGRESS=`curl --silent --show-error -H "${requestedBy}" -X GET -u admin:admin $arguments.getCheckStatusUrl() 2>&1 | grep -oP '\"progress_percent\"\s+\:\s+\K[0-9]+'`
    echo -ne "$PROGRESS percent complete!"\\r
    sleep 5
done

#log("Adding Admin User")
useradd -G hdfs admin
usermod -a -G users admin
usermod -a -G hadoop admin

#log("Cluster Install Complete!  http://$arguments.hostname:8080")
